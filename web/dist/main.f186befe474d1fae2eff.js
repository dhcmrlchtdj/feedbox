!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="tjUo")}({Tf3d:function(t,e,n){},Wgwc:function(t,e,n){t.exports=function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",i="day",s="week",a="month",o="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})(.*?(\d{1,2}):(\d{1,2}):(\d{1,2}))?.?(\d{1,3})?$/,c=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},l={padStart:f,padZoneStr:function(t){var e=Math.abs(t),n=Math.floor(e/60),r=e%60;return(t<=0?"+":"-")+f(n,2,"0")+":"+f(r,2,"0")},monthDiff:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months"),i=e-r<0,s=t.clone().add(n+(i?-1:1),"months");return Number(-(n+(e-r)/(i?r-s:s-r)))},absFloor:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},prettyUnit:function(u){return{M:a,y:o,w:s,d:i,h:r,m:n,s:e,ms:t}[u]||String(u||"").toLowerCase().replace(/s$/,"")},isUndefined:function(t){return void 0===t}},h="en",m={};m[h]=d;var p=function(t){return t instanceof g},$=function(t,e,n){var r;if(!t)return null;if("string"==typeof t)m[t]&&(r=t),e&&(m[t]=e,r=t);else{var i=t.name;m[i]=t,r=i}return n||(h=r),r},v=function(t,e){if(p(t))return t.clone();var n=e||{};return n.date=t,new g(n)},y=function(t,e){return v(t,{locale:e.$L})},_=l;_.parseLocale=$,_.isDayjs=p,_.wrapper=y;var g=function(){function d(t){this.parse(t)}var f=d.prototype;return f.parse=function(t){var e,n;this.$d=null===(e=t.date)?new Date(NaN):_.isUndefined(e)?new Date:e instanceof Date?e:"string"==typeof e&&/.*[^Z]$/i.test(e)&&(n=e.match(u))?new Date(n[1],n[2]-1,n[3]||1,n[5]||0,n[6]||0,n[7]||0,n[8]||0):new Date(e),this.init(t)},f.init=function(t){this.$y=this.$d.getFullYear(),this.$M=this.$d.getMonth(),this.$D=this.$d.getDate(),this.$W=this.$d.getDay(),this.$H=this.$d.getHours(),this.$m=this.$d.getMinutes(),this.$s=this.$d.getSeconds(),this.$ms=this.$d.getMilliseconds(),this.$L=this.$L||$(t.locale,null,!0)||h},f.$utils=function(){return _},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.$compare=function(t){return this.valueOf()-v(t).valueOf()},f.isSame=function(t){return 0===this.$compare(t)},f.isBefore=function(t){return this.$compare(t)<0},f.isAfter=function(t){return this.$compare(t)>0},f.year=function(){return this.$y},f.month=function(){return this.$M},f.day=function(){return this.$W},f.date=function(){return this.$D},f.hour=function(){return this.$H},f.minute=function(){return this.$m},f.second=function(){return this.$s},f.millisecond=function(){return this.$ms},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,u){var c=this,d=!!_.isUndefined(u)||u,f=function(t,e){var n=y(new Date(c.$y,e,t),c);return d?n:n.endOf(i)},l=function(t,e){return y(c.toDate()[t].apply(c.toDate(),d?[0,0,0,0].slice(e):[23,59,59,999].slice(e)),c)};switch(_.prettyUnit(t)){case o:return d?f(1,0):f(31,11);case a:return d?f(1,this.$M):f(0,this.$M+1);case s:return f(d?this.$D-this.$W:this.$D+(6-this.$W),this.$M);case i:case"date":return l("setHours",0);case r:return l("setMinutes",1);case n:return l("setSeconds",2);case e:return l("setMilliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(s,u){switch(_.prettyUnit(s)){case i:this.$d.setDate(this.$D+(u-this.$W));break;case"date":this.$d.setDate(u);break;case a:this.$d.setMonth(u);break;case o:this.$d.setFullYear(u);break;case r:this.$d.setHours(u);break;case n:this.$d.setMinutes(u);break;case e:this.$d.setSeconds(u);break;case t:this.$d.setMilliseconds(u)}return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.add=function(t,u){var c=this;t=Number(t);var d,f=_.prettyUnit(u),l=function(e,n){var r=c.set("date",1).set(e,n+t);return r.set("date",Math.min(c.$D,r.daysInMonth()))},h=function(e){var n=new Date(c.$d);return n.setDate(n.getDate()+e*t),y(n,c)};if(f===a)return l(a,this.$M);if(f===o)return l(o,this.$y);if(f===i)return h(1);if(f===s)return h(7);switch(f){case n:d=6e4;break;case r:d=36e5;break;case e:d=1e3;break;default:d=1}var m=this.valueOf()+t*d;return y(m,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this,n=t||"YYYY-MM-DDTHH:mm:ssZ",r=_.padZoneStr(this.$d.getTimezoneOffset()),i=this.$locale(),s=i.weekdays,a=i.months,o=function(t,e,n,r){return t&&t[e]||n[e].substr(0,r)};return n.replace(c,function(t){if(t.indexOf("[")>-1)return t.replace(/\[|\]/g,"");switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return String(e.$y);case"M":return String(e.$M+1);case"MM":return _.padStart(e.$M+1,2,"0");case"MMM":return o(i.monthsShort,e.$M,a,3);case"MMMM":return a[e.$M];case"D":return String(e.$D);case"DD":return _.padStart(e.$D,2,"0");case"d":return String(e.$W);case"dd":return o(i.weekdaysMin,e.$W,s,2);case"ddd":return o(i.weekdaysShort,e.$W,s,3);case"dddd":return s[e.$W];case"H":return String(e.$H);case"HH":return _.padStart(e.$H,2,"0");case"h":case"hh":return 0===e.$H?12:_.padStart(e.$H<13?e.$H:e.$H-12,"hh"===t?2:1,"0");case"a":return e.$H<12?"am":"pm";case"A":return e.$H<12?"AM":"PM";case"m":return String(e.$m);case"mm":return _.padStart(e.$m,2,"0");case"s":return String(e.$s);case"ss":return _.padStart(e.$s,2,"0");case"SSS":return _.padStart(e.$ms,3,"0");case"Z":return r;default:return r.replace(":","")}})},f.diff=function(t,u,c){var d=_.prettyUnit(u),f=v(t),l=this-f,h=_.monthDiff(this,f);switch(d){case o:h/=12;break;case a:break;case"quarter":h/=3;break;case s:h=l/6048e5;break;case i:h=l/864e5;break;case r:h=l/36e5;break;case n:h=l/6e4;break;case e:h=l/1e3;break;default:h=l}return c?h:_.absFloor(h)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return m[this.$L]},f.locale=function(t,e){var n=this.clone();return n.$L=$(t,e,!0),n},f.clone=function(){return y(this.toDate(),this)},f.toDate=function(){return new Date(this.$d)},f.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]},f.toJSON=function(){return this.toISOString()},f.toISOString=function(){return this.toDate().toISOString()},f.toObject=function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}},f.toString=function(){return this.$d.toUTCString()},d}();return v.extend=function(t,e){return t(e,g,v),v},v.locale=$,v.isDayjs=p,v.unix=function(t){return v(1e3*t)},v.en=m[h],v}()},tjUo:function(t,e,n){"use strict";n.r(e);n("Tf3d");const r="https://fbox.herokuapp.com",i=t=>{if(401===t.status)throw location.href=`${r}/connect/github`,new Error(t.status);return t},s=async(t,e,n)=>fetch(`${r}${t}`,{method:e,headers:{"Content-Type":"application/json; charset=utf-8"},body:n&&JSON.stringify(n),redirect:"follow",mode:"cors",credentials:"include"}).then(i).then(t=>t.json()),a=async t=>s(t,"GET");var o=n("Wgwc"),u=n.n(o);function c(t,e="YYYY-MM-DD HH:mm:ss"){return t?u()(t).format(e):"unknown"}var d={async del(t){if(window.confirm("Do you confirm?")){const e=await(async(t,e)=>s(t,"DELETE",e))("/api/v1/feeds/remove",{feedId:t.id});this.set({feeds:e})}},async add(t){const e=await(async(t,e)=>s(t,"PUT",e))("/api/v1/feeds/add",{url:t});this.set({url:"",feeds:e})}};function f(t){const{component:e,ctx:n}=this._svelte;e.del(n.feed)}function l(t,e,n){const r=Object.create(t);return r.feed=e[n],r}function h(t,e){var n,r,i,s,a,o,u,c,d,f,h,$,g,O,H,x,j,T=!1,Y=[],U=M();function L(){T=!0,t.set({url:h.value}),T=!1}function W(n){t.add(e.url)}var A=e.feeds;const C=t=>t.feed.id;for(var E=0;E<A.length;E+=1){let n=l(e,A,E),r=C(n);Y[E]=U[r]=p(t,r,n)}var I=null;return A.length||(I=m(t,e)).c(),{c(){for(n=v("div"),(r=v("h1")).textContent="feedbox",i=S("\n            "),s=v("span"),a=S(e.email),o=S("\n        "),(u=v("div")).innerHTML='<div class="divider"></div>',c=S("\n\n        "),d=v("div"),f=v("div"),h=v("input"),$=S("\n                "),(g=v("button")).textContent="add",O=S("\n        "),(H=v("div")).innerHTML='<div class="divider"></div>',x=S("\n\n        "),E=0;E<Y.length;E+=1)Y[E].c();var t,l,m;j=document.createComment(""),r.className="d-inline-block",s.className="chip",n.className="column col-12",u.className="column col-12",D(h,"input",L),t=h,l="type",null==(m="text")?t.removeAttribute(l):t.setAttribute(l,m),h.className="form-input",h.placeholder="feed url",D(g,"click",W),g.type="button",g.className="btn btn-primary input-group-btn",f.className="input-group",d.className="column col-12",H.className="column col-12"},m(t,l){for(y(t,n,l),_(n,r),_(n,i),_(n,s),_(s,a),y(t,o,l),y(t,u,l),y(t,c,l),y(t,d,l),_(d,f),_(f,h),h.value=e.url,_(f,$),_(f,g),y(t,O,l),y(t,H,l),y(t,x,l),E=0;E<Y.length;E+=1)Y[E].m(t,l);y(t,j,l),I&&I.m(t,null)},p(n,r){e=r,n.email&&k(a,e.email),!T&&n.url&&(h.value=e.url);const i=e.feeds;Y=function(t,e,n,r,i,s,a,o,u,c,d,f,l,h){var m=t.length,p=a.length,$=m,v={};for(;$--;)v[t[$].key]=$;var y=[],_={},g={},$=p;for(;$--;){var b=h(s,a,$),M=r(b),S=o[M];S?i&&S.p(n,b):(S=d(e,M,b)).c(),y[$]=_[M]=S,M in v&&(g[M]=Math.abs($-v[M]))}var D={},k={};function w(t){t[f](u,l),o[t.key]=t,l=t.first,p--}for(;m&&p;){var N=y[p-1],O=t[m-1],H=N.key,x=O.key;N===O?(l=N.first,m--,p--):_[x]?!o[H]||D[H]?w(N):k[x]?m--:g[H]>g[x]?(k[H]=!0,w(N)):(D[x]=!0,m--):(c(O,o),m--)}for(;m--;){var O=t[m];_[O.key]||c(O,o)}for(;p;)w(y[p-1]);return y}(Y,t,n,C,1,e,i,U,j.parentNode,w,p,"m",j,l),i.length?I&&(I.d(1),I=null):I||((I=m(t,e)).c(),I.m(j.parentNode,j))},d(t){for(t&&(b(n),b(o),b(u),b(c),b(d)),N(h,"input",L),N(g,"click",W),t&&(b(O),b(H),b(x)),E=0;E<Y.length;E+=1)Y[E].d(t);t&&b(j),I&&I.d(t)}}}function m(t,e){var n;return{c(){(n=v("p")).textContent="No feeds :("},m(t,e){y(t,n,e)},d(t){t&&b(n)}}}function p(t,e,n){var r,i,s,a,o,u,d,l,h,m,p,$,g,M,w,O,H,x=n.feed.url,j=c(n.feed.lastUpdated);return{key:e,first:null,c(){r=v("div"),i=v("div"),s=v("div"),a=v("div"),o=v("span"),u=S(x),d=S("\n                    "),l=v("div"),h=v("span"),m=S("updated @ "),p=S(j),$=S("\n                "),g=v("div"),M=v("div"),(w=v("button")).textContent="delete",O=S("\n        "),(H=v("div")).innerHTML='<div class="divider"></div>',a.className="tile-title text-break",l.className="tile-subtitle text-gray",s.className="tile-content",w._svelte={component:t,ctx:n},D(w,"click",f),w.type="button",w.className="btn btn-error",g.className="tile-action",i.className="tile",r.className="column col-12",H.className="column col-12",this.first=r},m(t,e){y(t,r,e),_(r,i),_(i,s),_(s,a),_(a,o),_(o,u),_(s,d),_(s,l),_(l,h),_(h,m),_(h,p),_(i,$),_(i,g),_(g,M),_(M,w),y(t,O,e),y(t,H,e)},p(t,e){n=e,t.feeds&&x!==(x=n.feed.url)&&k(u,x),t.feeds&&j!==(j=c(n.feed.lastUpdated))&&k(p,j),w._svelte.ctx=n},d(t){t&&b(r),N(w,"click",f),t&&(b(O),b(H))}}}function $(t){var e,n,r,i,s,o;!function(t,e){t._handlers=M(),t._slots=M(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}(this,t),this._state=O({feeds:[],email:"",url:""},t.data),this._intro=!!t.intro,this._fragment=(e=this,n=this._state,o=n.email&&h(e,n),{c(){r=v("div"),i=v("div"),o&&o.c(),i.className="columns",r.className="container grid-sm"},m(t,e){y(t,r,e),_(r,i),o&&o.m(i,null),s=!0},p(t,n){n.email?o?o.p(t,n):((o=h(e,n)).c(),o.m(i,null)):o&&(o.d(1),o=null)},i(t,e){s||this.m(t,e)},o:g,d(t){t&&b(r),o&&o.d()}}),this.root._oncreate.push(()=>{(async function(){const t=await a("/api/v1/user");this.set({email:t.email,feeds:t.feeds})}).call(this),this.fire("update",{changed:function(t,e){for(var n in e)t[n]=1;return t}({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),H(this)),this._intro=!0}function v(t){return document.createElement(t)}function y(t,e,n){t.insertBefore(e,n)}function _(t,e){t.appendChild(e)}function g(t){t()}function b(t){t.parentNode.removeChild(t)}function M(){return Object.create(null)}function S(t){return document.createTextNode(t)}function D(t,e,n,r){t.addEventListener(e,n,r)}function k(t,e){t.data=""+e}function w(t,e){t.d(1),e[t.key]=null}function N(t,e,n,r){t.removeEventListener(e,n,r)}function O(t,e){for(var n in e)t[n]=e[n];return t}function H(t){t._lock=!0,j(t._beforecreate),j(t._oncreate),j(t._aftercreate),t._lock=!1}function x(){}function j(t){for(;t&&t.length;)t.shift()()}O($.prototype,{destroy:function(t){this.destroy=x,this.fire("destroy"),this.set=x,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(!n)return;for(var r=0;r<n.length;r+=1){var i=n[r];if(!i.__calling)try{i.__calling=!0,i.call(this,e)}finally{i.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){if(this._set(O({},t)),this.root._lock)return;H(this.root)},_set:function(t){var e=this._state,n={},r=!1;for(var i in t=O(this._staged,t),this._staged={},t)this._differs(t[i],e[i])&&(n[i]=r=!0);if(!r)return;this._state=O(O({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state);this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e}))},_stage:function(t){O(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}}),O($.prototype,d),$.prototype._recompute=x;const T=new $({target:document.querySelector("#app")});e.default=T}});
//# sourceMappingURL=main.f186befe474d1fae2eff.js.map