!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="tjUo")}({"6BGy":function(t,e,n){},tjUo:function(t,e,n){"use strict";n.r(e);n("6BGy");const r="http://cadr.io:8000",s=t=>{if(401!==t.status)return t;location.href=`${r}/connect/github`},o=async(t,e,n)=>fetch(`${r}${t}`,{method:e,headers:{"Content-Type":"application/json; charset=utf-8"},body:n&&JSON.stringify(n),redirect:"follow",mode:"cors",credentials:"include"}).then(s).then(t=>t.json()),i=async t=>o(t,"GET");var c={async del(t){if(window.confirm("Do you confirm?")){const e=await(async(t,e)=>o(t,"DELETE",e))("/api/v1/feeds/remove",{feedId:t.id});console.log(e)}},async add(t){const e=await(async(t,e)=>o(t,"PUT",e))("/api/v1/feeds/add",{url:t});console.log(e)}};function a(t){const{component:e,ctx:n}=this._svelte;e.del(n.feed)}function u(t,e,n){const r=Object.create(t);return r.feed=e[n],r.each_value=e,r.feed_index=n,r}function f(t,e){var n,r,s=e.$user&&d(t,e);return{c(){s&&s.c(),n=document.createComment("")},m(t,e){s&&s.m(t,e),p(t,n,e),r=!0},p(e,r){r.$user?s?s.p(e,r):((s=d(t,r)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(t,e){r||this.m(t,e)},o:m,d(t){s&&s.d(t),t&&g(n)}}}function d(t,e){for(var n,r,s,o,i,c=e.$user.email,a=e.$feeds,f=[],d=0;d<a.length;d+=1)f[d]=h(t,u(e,a,d));var _=null;return a.length||(_=l(t,e)).c(),{c(){n=v("h1"),r=y("Hello "),s=y(c),o=y("\n\n"),i=v("ul");for(var t=0;t<f.length;t+=1)f[t].c()},m(t,e){p(t,n,e),b(n,r),b(n,s),p(t,o,e),p(t,i,e);for(var c=0;c<f.length;c+=1)f[c].m(i,null);_&&_.m(i,null)},p(e,n){if(e.$user&&c!==(c=n.$user.email)&&$(s,c),e.$feeds){a=n.$feeds;for(var r=0;r<a.length;r+=1){const s=u(n,a,r);f[r]?f[r].p(e,s):(f[r]=h(t,s),f[r].c(),f[r].m(i,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=a.length}a.length?_&&(_.d(1),_=null):_||((_=l(t,n)).c(),_.m(i,null))},d(t){t&&(g(n),g(o),g(i)),function(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(f,t),_&&_.d()}}}function l(t,e){var n;return{c(){(n=v("li")).textContent="No feeds :("},m(t,e){p(t,n,e)},d(t){t&&g(n)}}}function h(t,e){var n,r,s,o,i,c,u,f,d,l,h,_=e.feed.url,m=e.feed.lastUpdated;return{c(){var p,g;n=v("li"),r=v("p"),s=y("url: "),o=y(_),i=y("\n        "),c=v("p"),u=y("lastUpdated: "),f=y(m),d=y("\n        "),(l=v("button")).textContent="delete",h=y("\n    "),l._svelte={component:t,ctx:e},p="click",g=a,l.addEventListener(p,g,!1),l.className="pure-button"},m(t,e){p(t,n,e),b(n,r),b(r,s),b(r,o),b(n,i),b(n,c),b(c,u),b(c,f),b(n,d),b(n,l),b(n,h)},p(t,n){e=n,t.$feeds&&_!==(_=e.feed.url)&&$(o,_),t.$feeds&&m!==(m=e.feed.lastUpdated)&&$(f,m),l._svelte.ctx=e},d(t){var e,r;t&&g(n),e="click",r=a,l.removeEventListener(e,r,!1)}}}function _(t){!function(t,e){t._handlers=O(),t._slots=O(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}(this,t),this._state=j(this.store._init(["user","feeds"]),t.data),this.store._add(this,["user","feeds"]),this._intro=!!t.intro,this._handlers.destroy=[w],this._fragment=f(this,this._state),this.root._oncreate.push(()=>{(async function(){const t=await i("/api/v1/user");this.store.set({user:t})}).call(this),this.fire("update",{changed:function(t,e){for(var n in e)t[n]=1;return t}({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),x(this)),this._intro=!0}function p(t,e,n){t.insertBefore(e,n)}function m(t){t()}function g(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function b(t,e){t.appendChild(e)}function $(t,e){t.data=""+e}function j(t,e){for(var n in e)t[n]=e[n];return t}function w(){this.store._remove(this)}function x(t){t._lock=!0,P(t._beforecreate),P(t._oncreate),P(t._aftercreate),t._lock=!1}function C(){}function O(){return Object.create(null)}function P(t){for(;t&&t.length;)t.shift()()}j(_.prototype,{destroy:function(t){this.destroy=C,this.fire("destroy"),this.set=C,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(!n)return;for(var r=0;r<n.length;r+=1){var s=n[r];if(!s.__calling)try{s.__calling=!0,s.call(this,e)}finally{s.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){if(this._set(j({},t)),this.root._lock)return;x(this.root)},_set:function(t){var e=this._state,n={},r=!1;for(var s in t=j(this._staged,t),this._staged={},t)this._differs(t[s],e[s])&&(n[s]=r=!0);if(!r)return;this._state=j(j({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state);this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e}))},_stage:function(t){j(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}}),j(_.prototype,c),_.prototype._recompute=C;var E=_;function S(t,e){for(var n in e)t[n]=e[n];return t}function T(){return Object.create(null)}function N(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function U(t,e){return t!=t?e==e:t!==e}function k(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var s=n[r];if(!s.__calling)try{s.__calling=!0,s.call(this,e)}finally{s.__calling=!1}}}function M(){return this._state}function B(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function G(t,e){this._handlers={},this._dependents=[],this._computed=T(),this._sortedComputedProperties=[],this._state=S({},t),this._differs=e&&e.immutable?U:N}S(G.prototype,{_add(t,e){this._dependents.push({component:t,props:e})},_init(t){const e={};for(let n=0;n<t.length;n+=1){const r=t[n];e["$"+r]=this._state[r]}return e},_remove(t){let e=this._dependents.length;for(;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set(t,e){const n=this._state;this._state=S(S({},n),t);for(let t=0;t<this._sortedComputedProperties.length;t+=1)this._sortedComputedProperties[t].update(this._state,e);this.fire("state",{changed:e,previous:n,current:this._state}),this._dependents.filter(t=>{const n={};let r=!1;for(let s=0;s<t.props.length;s+=1){const o=t.props[s];o in e&&(n["$"+o]=this._state[o],r=!0)}if(r)return t.component._stage(n),!0}).forEach(t=>{t.component.set({})}),this.fire("update",{changed:e,previous:n,current:this._state})},_sortComputedProperties(){const t=this._computed,e=this._sortedComputedProperties=[],n=T();let r;function s(o){const i=t[o];i&&(i.deps.forEach(t=>{if(t===r)throw new Error(`Cyclical dependency detected between ${t} <-> ${o}`);s(t)}),n[o]||(n[o]=!0,e.push(i)))}for(const t in this._computed)s(r=t)},compute(t,e,n){let r;const s={deps:e,update:(s,o,i)=>{const c=e.map(t=>(t in o&&(i=!0),s[t]));if(i){const e=n.apply(null,c);this._differs(e,r)&&(r=e,o[t]=!0,s[t]=r)}}};this._computed[t]=s,this._sortComputedProperties();const o=S({},this._state),i={};s.update(o,i,!0),this._set(o,i)},fire:k,get:M,on:B,set(t){const e=this._state,n=this._changed={};let r=!1;for(const s in t){if(this._computed[s])throw new Error(`'${s}' is a read-only computed property`);this._differs(t[s],e[s])&&(n[s]=r=!0)}r&&this._set(t,n)}});const L=new G({user:null});L.compute("feeds",["user"],t=>t?t.feeds:[]);var D=L;const q=new E({target:document.querySelector("#app"),store:D});e.default=q}});
//# sourceMappingURL=main.6a390196e4b616950b66.js.map