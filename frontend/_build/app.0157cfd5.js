function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e}function c(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t){return Array.from(t.childNodes)}function p(t,e,n,r){for(let r=0;r<t.length;r+=1){const o=t[r];if(o.nodeName===e){let e=0;const s=[];for(;e<o.attributes.length;){const t=o.attributes[e++];n[t.name]||s.push(t.name)}for(let t=0;t<s.length;t++)o.removeAttribute(s[t]);return t.splice(r,1)[0]}}return r?function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}(e):i(e)}function g(t,e){for(let n=0;n<t.length;n+=1){const r=t[n];if(3===r.nodeType)return r.data=""+e,t.splice(n,1)[0]}return u(e)}function v(t){return g(t," ")}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function E(t,e,n){t.classList[n?"add":"remove"](e)}let y;function k(t){y=t}function D(){if(!y)throw new Error("Function called outside component initialization");return y}const w=[],x=[],I=[],V=[],_=Promise.resolve();let T=!1;function M(t){I.push(t)}let A=!1;const N=new Set;function Y(){if(!A){A=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];k(e),S(e.$$)}for(k(null),w.length=0;x.length;)x.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];N.has(e)||(N.add(e),e())}I.length=0}while(w.length);for(;V.length;)V.pop()();T=!1,A=!1,N.clear()}}function S(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const P=new Set;let j;function L(t,e){t&&t.i&&(P.delete(t),t.i(e))}function O(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),j.c.push((()=>{P.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function B(t,e){const n=e.token={};function o(t,o,s,c){if(e.token!==n)return;e.resolved=c;let a=e.ctx;void 0!==s&&(a=a.slice(),a[s]=c);const l=t&&(e.current=t)(a);let i=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(j={r:0,c:[],p:j},O(t,1,1,(()=>{e.blocks[n]=null})),j.r||r(j.c),j=j.p)})):e.block.d(1),l.c(),L(l,1),l.m(e.mount(),e.anchor),i=!0),e.block=l,e.blocks&&(e.blocks[o]=l),i&&Y()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=D();if(t.then((t=>{k(n),o(e.then,1,e.value,t),k(null)}),(t=>{if(k(n),o(e.catch,2,e.error,t),k(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var s}function C(t,e){t.d(1),e.delete(t.key)}function U(t){t&&t.c()}function F(t,e){t&&t.l(e)}function H(t,n,s){const{fragment:c,on_mount:a,on_destroy:l,after_update:i}=t.$$;c&&c.m(n,s),M((()=>{const n=a.map(e).filter(o);l?l.push(...n):r(n),t.$$.on_mount=[]})),i.forEach(M)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(w.push(t),T||(T=!0,_.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,s,c,a,i,u=[-1]){const f=y;k(e);const d=o.props||{},h=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(h.ctx=s?s(e,d,((t,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),p&&G(e,t)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),o.target){if(o.hydrate){const t=m(o.target);h.fragment&&h.fragment.l(t),t.forEach(l)}else h.fragment&&h.fragment.c();o.intro&&L(e.$$.fragment),H(e,o.target,o.anchor),Y()}k(f)}class z{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function J(e){let n,r,o;return{c(){n=i("div"),r=i("div"),o=i("button"),this.h()},l(t){n=p(t,"DIV",{class:!0});var e=m(n);r=p(e,"DIV",{class:!0});var s=m(r);o=p(s,"BUTTON",{class:!0}),m(o).forEach(l),s.forEach(l),e.forEach(l),this.h()},h(){h(o,"class","btn btn-link loading loading-lg"),h(r,"class","column col-12"),h(n,"class","columns")},m(t,e){a(t,n,e),c(n,r),c(r,o)},p:t,i:t,o:t,d(t){t&&l(n)}}}class K extends z{constructor(t){super(),W(this,t,null,J,s,{})}}function Q(e){let n,r,o,s,d,b,E,y,k,D,w,x;return{c(){n=i("div"),r=i("div"),o=i("div"),s=i("span"),d=u(e[0]),b=f(),E=i("div"),y=i("div"),k=f(),D=i("div"),w=i("a"),x=u("Login with GitHub"),this.h()},l(t){n=p(t,"DIV",{class:!0});var c=m(n);r=p(c,"DIV",{class:!0});var a=m(r);o=p(a,"DIV",{class:!0});var i=m(o);s=p(i,"SPAN",{});var u=m(s);d=g(u,e[0]),u.forEach(l),i.forEach(l),a.forEach(l),b=v(c),E=p(c,"DIV",{class:!0});var f=m(E);y=p(f,"DIV",{class:!0}),m(y).forEach(l),f.forEach(l),k=v(c),D=p(c,"DIV",{class:!0});var h=m(D);w=p(h,"A",{class:!0,href:!0});var $=m(w);x=g($,"Login with GitHub"),$.forEach(l),h.forEach(l),c.forEach(l),this.h()},h(){h(o,"class","toast toast-error"),h(r,"class","column col-12 mt-2"),h(y,"class","divider"),h(E,"class","column col-12"),h(w,"class","btn btn-lg btn-secondary"),h(w,"href","/api/connect/github"),h(D,"class","column col-12 text-center"),h(n,"class","columns")},m(t,e){a(t,n,e),c(n,r),c(r,o),c(o,s),c(s,d),c(n,b),c(n,E),c(E,y),c(n,k),c(n,D),c(D,w),c(w,x)},p(t,[e]){1&e&&$(d,t[0])},i:t,o:t,d(t){t&&l(n)}}}function R(t,e,n){let{err:r="unknown error"}=e;return t.$$set=t=>{"err"in t&&n(0,r=t.err)},[r]}class X extends z{constructor(t){super(),W(this,t,R,Q,s,{err:0})}}const Z=async t=>{if(t.ok){return await t.json()}{const e=await t.text();throw new Error(e)}},tt=async(t,e,n,r={})=>(r["Content-Type"]||(r["Content-Type"]="application/json; charset=utf-8"),fetch(e,{method:t,headers:r,body:n&&JSON.stringify(n),redirect:"follow",mode:"same-origin",credentials:"same-origin"}).then(Z)),et=async(t,e)=>tt("GET",t,null,e),nt=t=>("0"+t).slice(-2),rt=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return t.replace(/[&<>"']/g,(t=>e[t]))};function ot(t,e,n){const r=t.slice();return r[11]=e[n],r}function st(t,e){let n,r,o,s,b,y,k,D,w,x,I,V,_,T,M,A,N,Y,S,P,j,L,O=rt(e[11].url)+"",B=e[4](e[11].updated)+"";function C(...t){return e[9](e[11],...t)}return{key:t,first:null,c(){n=i("div"),r=i("div"),o=i("div"),s=i("div"),b=i("a"),y=u(O),D=f(),w=i("div"),x=i("span"),I=u("updated @ "),V=u(B),_=f(),T=i("div"),M=i("div"),A=i("button"),N=u("delete"),Y=f(),S=i("div"),P=i("div"),this.h()},l(t){n=p(t,"DIV",{class:!0});var e=m(n);r=p(e,"DIV",{class:!0});var c=m(r);o=p(c,"DIV",{class:!0});var a=m(o);s=p(a,"DIV",{class:!0});var i=m(s);b=p(i,"A",{target:!0,rel:!0,href:!0});var u=m(b);y=g(u,O),u.forEach(l),i.forEach(l),D=v(a),w=p(a,"DIV",{class:!0});var f=m(w);x=p(f,"SPAN",{});var d=m(x);I=g(d,"updated @ "),V=g(d,B),d.forEach(l),f.forEach(l),a.forEach(l),_=v(c),T=p(c,"DIV",{class:!0});var h=m(T);M=p(h,"DIV",{});var $=m(M);A=p($,"BUTTON",{type:!0,class:!0});var E=m(A);N=g(E,"delete"),E.forEach(l),$.forEach(l),h.forEach(l),c.forEach(l),e.forEach(l),Y=v(t),S=p(t,"DIV",{class:!0});var k=m(S);P=p(k,"DIV",{class:!0}),m(P).forEach(l),k.forEach(l),this.h()},h(){h(b,"target","_blank"),h(b,"rel","noopener"),h(b,"href",k=rt(e[11].url)),h(s,"class","tile-title text-break"),h(w,"class","tile-subtitle text-gray"),h(o,"class","tile-content"),h(A,"type","button"),h(A,"class","btn btn-error"),E(A,"loading",e[11].loading),E(A,"disabled",e[11].loading),h(T,"class","tile-action"),h(r,"class","tile"),h(n,"class","column col-12"),h(P,"class","divider"),h(S,"class","column col-12"),this.first=n},m(t,e){a(t,n,e),c(n,r),c(r,o),c(o,s),c(s,b),c(b,y),c(o,D),c(o,w),c(w,x),c(x,I),c(x,V),c(r,_),c(r,T),c(T,M),c(M,A),c(A,N),a(t,Y,e),a(t,S,e),c(S,P),j||(L=d(A,"click",C),j=!0)},p(t,n){e=t,1&n&&O!==(O=rt(e[11].url)+"")&&$(y,O),1&n&&k!==(k=rt(e[11].url))&&h(b,"href",k),1&n&&B!==(B=e[4](e[11].updated)+"")&&$(V,B),1&n&&E(A,"loading",e[11].loading),1&n&&E(A,"disabled",e[11].loading)},d(t){t&&l(n),t&&l(Y),t&&l(S),j=!1,L()}}}function ct(e){let n,o,s,y,k,D,w,x,I,V,_,T,M,A,N,Y,S,P,j,O,B,U,F,H,q,G,W,z,J,K=[],Q=new Map,R=e[0];const X=t=>t[11].id;for(let t=0;t<R.length;t+=1){let n=ot(e,R,t),r=X(n);Q.set(r,K[t]=st(r,n))}return{c(){n=i("div"),o=i("div"),s=i("h1"),y=u("FeedBox"),k=f(),D=i("span"),w=u(e[1]),x=f(),I=i("a"),V=u("OPML"),_=f(),T=i("a"),M=u("logout"),A=f(),N=i("div"),Y=i("div"),S=f(),P=i("div"),j=i("div"),O=i("input"),B=f(),U=i("button"),F=u("add"),H=f(),q=i("div"),G=i("div"),W=f();for(let t=0;t<K.length;t+=1)K[t].c();this.h()},l(t){n=p(t,"DIV",{class:!0});var r=m(n);o=p(r,"DIV",{class:!0});var c=m(o);s=p(c,"H1",{class:!0,style:!0});var a=m(s);y=g(a,"FeedBox"),a.forEach(l),k=v(c),D=p(c,"SPAN",{});var i=m(D);w=g(i,e[1]),i.forEach(l),x=v(c),I=p(c,"A",{href:!0,target:!0});var u=m(I);V=g(u,"OPML"),u.forEach(l),_=v(c),T=p(c,"A",{href:!0});var f=m(T);M=g(f,"logout"),f.forEach(l),c.forEach(l),A=v(r),N=p(r,"DIV",{class:!0});var d=m(N);Y=p(d,"DIV",{class:!0}),m(Y).forEach(l),d.forEach(l),S=v(r),P=p(r,"DIV",{class:!0});var h=m(P);j=p(h,"DIV",{class:!0});var $=m(j);O=p($,"INPUT",{class:!0,type:!0,placeholder:!0}),B=v($),U=p($,"BUTTON",{type:!0,class:!0});var b=m(U);F=g(b,"add"),b.forEach(l),$.forEach(l),h.forEach(l),H=v(r),q=p(r,"DIV",{class:!0});var E=m(q);G=p(E,"DIV",{class:!0}),m(G).forEach(l),E.forEach(l),W=v(r);for(let t=0;t<K.length;t+=1)K[t].l(r);r.forEach(l),this.h()},h(){var t,r,c;h(s,"class","d-inline-block"),t="margin-bottom",r="0",s.style.setProperty(t,r,c?"important":""),h(I,"href","/api/v1/feeds/export"),h(I,"target","_blank"),h(T,"href","/api/logout"),h(o,"class","column col-12"),h(Y,"class","divider"),h(N,"class","column col-12"),h(O,"class","form-input"),h(O,"type","text"),h(O,"placeholder","feed url"),h(U,"type","button"),h(U,"class","btn btn-primary input-group-btn"),E(U,"loading",e[2]),E(U,"disabled",e[2]),h(j,"class","input-group"),h(P,"class","column col-12"),h(G,"class","divider"),h(q,"class","column col-12"),h(n,"class","columns")},m(t,r){a(t,n,r),c(n,o),c(o,s),c(s,y),c(o,k),c(o,D),c(D,w),c(o,x),c(o,I),c(I,V),c(o,_),c(o,T),c(T,M),c(n,A),c(n,N),c(N,Y),c(n,S),c(n,P),c(P,j),c(j,O),b(O,e[3]),c(j,B),c(j,U),c(U,F),c(n,H),c(n,q),c(q,G),c(n,W);for(let t=0;t<K.length;t+=1)K[t].m(n,null);z||(J=[d(T,"click",e[7]),d(O,"input",e[8]),d(U,"click",e[6])],z=!0)},p(t,[e]){if(2&e&&$(w,t[1]),8&e&&O.value!==t[3]&&b(O,t[3]),4&e&&E(U,"loading",t[2]),4&e&&E(U,"disabled",t[2]),49&e){const r=t[0];K=function(t,e,n,r,o,s,c,a,l,i,u,f){let d=t.length,h=s.length,m=d;const p={};for(;m--;)p[t[m].key]=m;const g=[],v=new Map,$=new Map;for(m=h;m--;){const t=f(o,s,m),a=n(t);let l=c.get(a);l?r&&l.p(t,e):(l=i(a,t),l.c()),v.set(a,g[m]=l),a in p&&$.set(a,Math.abs(m-p[a]))}const b=new Set,E=new Set;function y(t){L(t,1),t.m(a,u),c.set(t.key,t),u=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],r=e.key,o=n.key;e===n?(u=e.first,d--,h--):v.has(o)?!c.has(r)||b.has(r)?y(e):E.has(o)?d--:$.get(r)>$.get(o)?(E.add(r),y(e)):(b.add(o),d--):(l(n,c),d--)}for(;d--;){const e=t[d];v.has(e.key)||l(e,c)}for(;h;)y(g[h-1]);return g}(K,e,X,1,t,r,Q,n,C,st,null,ot)}},i:t,o:t,d(t){t&&l(n);for(let t=0;t<K.length;t+=1)K[t].d();z=!1,r(J)}}}function at(t,e,n){let{email:r=""}=e,{feeds:o=[]}=e,s=!1,c="";const a=t=>{window.alert(t),location.reload()},l=async t=>{window.confirm(`DELETE "${t.url}"`)&&(t.loading=!0,(async(t,e,n)=>tt("DELETE",t,e,n))("/api/v1/feeds/remove",{feedID:t.id}).then((t=>{n(0,o=t)})).catch((t=>a(t.message))))};return t.$$set=t=>{"email"in t&&n(1,r=t.email),"feeds"in t&&n(0,o=t.feeds)},[o,r,s,c,t=>null===t?"never":((t,e="YYYY-MM-DD hh:mm:ss")=>{const n=new Date(t),r=n.getFullYear(),o=n.getMonth()+1,s=n.getDate(),c=n.getHours(),a=n.getMinutes(),l=n.getSeconds(),i={YYYY:r,M:o,MM:nt(o),D:s,DD:nt(s),h:c,hh:nt(c),m:a,mm:nt(a),s:l,ss:nt(l)};return e.replace(/YYYY|MM?|DD?|hh?|mm?|ss?/g,(t=>i[t]))})(t),l,async()=>{n(2,s=!0),(async(t,e,n)=>tt("PUT",t,e,n))("/api/v1/feeds/add",{url:c}).then((t=>{n(0,o=t),n(3,c="")})).catch((t=>a(t.message))).then((()=>n(2,s=!1)))},()=>{const t=navigator.serviceWorker;t&&t.controller&&t.controller.postMessage("logout")},function(){c=this.value,n(3,c)},t=>l(t)]}class lt extends z{constructor(t){super(),W(this,t,at,ct,s,{email:1,feeds:0})}}class it{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}function ut(t){let e,n;return e=new X({props:{err:t[4]}}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){H(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.err=t[4]),e.$set(r)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ft(t){let e,n;return e=new lt({props:{email:t[0],feeds:t[1]}}),{c(){U(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){H(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.email=t[0]),2&n&&(r.feeds=t[1]),e.$set(r)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function dt(e){let n,r;return n=new K({}),{c(){U(n.$$.fragment)},l(t){F(n.$$.fragment,t)},m(t,e){H(n,t,e),r=!0},p:t,i(t){r||(L(n.$$.fragment,t),r=!0)},o(t){O(n.$$.fragment,t),r=!1},d(t){q(n,t)}}}function ht(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:dt,then:ft,catch:ut,error:4,blocks:[,,,]};return B(n=t[2].promise,o),{c(){e=i("div"),o.block.c(),this.h()},l(t){e=p(t,"DIV",{class:!0});var n=m(e);o.block.l(n),n.forEach(l),this.h()},h(){h(e,"class","container grid-sm")},m(t,n){a(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){if(t=e,o.ctx=t,4&r&&n!==(n=t[2].promise)&&B(n,o));else{const e=t.slice();e[4]=o.resolved,o.block.p(e,r)}},i(t){r||(L(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){O(o.blocks[t])}r=!1},d(t){t&&l(e),o.block.d(),o.token=null,o=null}}}function mt(t,e,n){const r=self.__STATE__||{};let{loaded:o=r.loaded||new it}=e,{email:s=r.email||""}=e,{feeds:c=r.feeds||[]}=e;var a;return a=()=>{Promise.all([et("/api/v1/user"),et("/api/v1/feeds")]).then((([t,e])=>{n(0,s=t.addition.email),n(1,c=e),o.resolve&&o.resolve(!0)})).catch((t=>{console.error(t.stack),o.reject&&o.reject(t.message)}))},D().$$.on_mount.push(a),t.$$set=t=>{"loaded"in t&&n(2,o=t.loaded),"email"in t&&n(0,s=t.email),"feeds"in t&&n(1,c=t.feeds)},[s,c,o]}new class extends z{constructor(t){super(),W(this,t,mt,ht,s,{loaded:2,email:0,feeds:1})}}({target:document.querySelector("#app"),hydrate:!0}),navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js");
//# sourceMappingURL=app.0157cfd5.js.map
